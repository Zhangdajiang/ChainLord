# 开发计划复盘与明日启动（2026-01-29）

## 项目总目标（三天规划）
### 第一天：私人实验室（打通钱包与 AI）
- 最低工作量：
  - 环境搭建（Cursor + Python + SpoonOS SDK）
  - 实现钱包连接按钮
  - 实现输入框，AI 能按人设回复
- 成功标准：
  - 页面可看到钱包地址
  - AI 按侧边栏人设回复
- Vibe 指令方向：
  - 用 Streamlit 写基础页面，接入 SpoonOS 钱包登录，并创建聊天界面

### 第二天：谋士团进化（多 Agent 与联网）
- 最低工作量：
  - 3 个 Agent 顺序对话（风险官 → 机会官 → 和事佬总结）
  - 接入 SpoonOS 搜索工具（MCP）
- 成功标准：
  - 输入热点后，三谋士基于实时搜索依次给建议
- Vibe 指令方向：
  - 单 Agent 改为三 Agent 顺序工作流
  - 接入 Google Search MCP，第一 Agent 负责搜集信息并传递

### 第三天：广场开放（社交与金钱）
- 最低工作量：
  - 接入 Supabase 存取帖子
  - 网页增加“广场页”展示卡片
  - 增加“投喂”按钮触发 x402
- 成功标准：
  - 换钱包登录能看到历史卡片
  - 能花 0.001 GAS 给卡片点赞
- Vibe 指令方向：
  - Supabase 存聊天记录，广场页展示
  - 卡片下增加 x402 支付按钮

## 难度评估
- UI 布局：1/10
- AI 逻辑：2/10
- 数据库接入：4/10
- SpoonOS 协议：5/10（MCP 与 x402 需要调试）

## 关键风险与规避
1. 环境陷阱（高）
   - 风险：版本、SDK、Key 报错
   - 规避：2 小时内不通就交给 Cursor，走最小化脚本
2. Token 消耗（中）
   - 风险：额度耗尽
   - 规避：短文本测试，设置消费限额
3. 数据同步延迟（低）
   - 风险：广场刷新不出来
   - 规避：先写入再展示
4. x402 支付失败（中）
   - 风险：钱包没钱或协议不通
   - 规避：先做 Mock 支付按钮，保留产品逻辑

---

## 今日复盘（Day 1 实际进度）
### 已完成
- Streamlit 应用跑通
- 侧边栏人设可设置并生效
- 主界面聊天可用
- 钱包连接按钮可用（当前为演示地址）
- DeepSeek 作为唯一模型已可正常回复

### 关键修复
- 只保留 DeepSeek Provider，避免 OpenAI/Claude 配置冲突
- 异步调用改为 `anyio.run()`，避免事件循环报错
- DeepSeek 默认 `max_tokens` 过大，已强制设置为 4096

---

## 明日启动步骤（Day 2 开工清单）
1. 启动服务
   ```
   python -m streamlit run "C:\Users\Zhangdajiang\Desktop\my_ai_lab\app.py"
   ```
2. 打开 Chrome
   ```
   start chrome "http://localhost:8501"
   ```
3. 确认 .env 中有：
   ```
   DEEPSEEK_API_KEY=你的key
   ```
4. 功能自检：
   - 钱包按钮可点击，显示地址
   - 人设保存后 AI 回复变化

---

## 明日待办清单（优先级从高到低）
1. **实现三 Agent 顺序对话**
   - 风险官 → 机会官 → 和事佬总结
2. **接入 SpoonOS MCP 搜索**
   - Google Search MCP
   - 第一 Agent 调用搜索，传递结果给后续 Agent
3. **保留单 Agent 模式做 fallback**
   - MCP 不通时仍可对话
4. **日志输出优化**
   - 显示搜索结果来源/摘要

---

## 当前文件与入口
- 主入口：`app.py`
- 运行命令：`python -m streamlit run "C:\Users\Zhangdajiang\Desktop\my_ai_lab\app.py"`
